define(["cBase"],function(a){"use strict";var b=window.JSON,c=a.Date,d=new a.Class({__propertys__:function(){this.proxy=null},initialize:function(){},_buildStorageObj:function(a,b,c,d,e){return{value:a,oldvalue:e||null,timeout:b,tag:c,savedate:d}},set:function(a,d,e,f,g,h){g=g||(new c).format("Y/m/d H:i:s"),e=e?new c(e):(new c).addDay(30);var i=this._buildStorageObj(d,e.format("Y/m/d H:i:s"),f,g,h);try{return this.proxy.setItem(a,b.stringify(i)),!0}catch(j){console&&0}return!1},get:function(a,d,e){var f,g=null;try{f=this.proxy.getItem(a),f&&(f=b.parse(f),c.parse(f.timeout,!0)>=new Date&&(d?d===f.tag&&(g=e?f.oldvalue:f.value):g=e?f.oldvalue:f.value))}catch(h){console&&0}return g},getTag:function(a){var c,d=null;try{c=this.proxy.getItem(a),c&&(c=b.parse(c),d=c&&c.tag)}catch(e){console&&0}return d},getSaveDate:function(a,d){var e,f=null;try{e=this.proxy.getItem(a),e&&(e=b.parse(e),e.savedate&&(f=c.parse(e.savedate),d||(f=f.valueOf())))}catch(g){console&&0}return f},getExpireTime:function(a){var c=null,d=null;try{c=this.proxy.getItem(a),c&&(c=b.parse(c),d=Date.parse(c.timeout))}catch(e){console&&0}return d},remove:function(a){return this.proxy.removeItem(a)},getAll:function(){for(var a=this.proxy.length,b=[],c=0;a>c;c++){var d=this.proxy.key(c),e={key:d,value:this.get(d)};b.push(e)}return b},clear:function(){this.proxy.clear()},gc:function(){for(var a=this.proxy,b=this.proxy.length,c=0;b>c;c++){var d=a.key(c);try{this.get(d)||this.remove(d)}catch(e){}}}});return d});