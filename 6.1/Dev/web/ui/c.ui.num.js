define(["cBase","cUIAbstractView"],function(a,b){var c={};return c.__propertys__=function(){this.min=1,this.max=9,this.curNum=1,this.needText=!0,this.addClass="num-add",this.minusClass="num-minus",this.curClass="num-value-txt",this.invalid="num-invalid",this.minAble=!0,this.maxAble=!0,this.unit="",this.minDom=null,this.maxDom=null,this.curDom=null,this.hasBindEvent=!1,this.changed=function(){},this.changeAble=function(){}},c.initialize=function($super,a){for(var b in a)this[b]=a[b];$super(a),this.bindEvent(),this.show()},c.bindEvent=function(){this.addEvent("onHide",function(){this.root.off("click"),this.curDom.off("focus"),this.curDom.off("blur"),this.root.remove()}),this.addEvent("onShow",function(){this.maxDom=this.root.find("."+this.addClass),this.minDom=this.root.find("."+this.minusClass),this.curDom=this.root.find("."+this.curClass),this.resetNum(),0==this.needText&&this.curDom.attr("disabled","disabled"),0==this.hasBindEvent&&(this.root.on("click",$.proxy(function(a){var b=$(a.target);b.hasClass(this.curClass)||(b.hasClass(this.addClass)&&this.maxAble&&this.setVal(this.curNum+1),b.hasClass(this.minusClass)&&this.minAble&&this.setVal(this.curNum-1),a.preventDefault())},this)),this.needText&&(this.curDom.on("focus",$.proxy(function(){this.curDom.val("")},this)),this.curDom.on("blur",$.proxy(function(){this.setVal(this.curDom.val())},this))),this.hasBindEvent=!0)})},c.resetNum=function(a){this.curDom.attr("data-key",this.curNum),this.curDom.val(this.getText()),"function"!=typeof this.changed||a||this.changed.call(this,this.curNum),this.testValid()},c.getVal=function(){return this.curNum},c.setVal=function(a){if("function"==typeof this.changeAble&&0==this.changeAble.call(this,a))return this.resetNum(!0),!1;var b=!0;a==parseInt(a)&&(b=this.curNum==a,a=parseInt(a),this.curNum=a,a<this.min&&(this.curNum=this.min),a>this.max&&(this.curNum=this.max)),this.resetNum(b)},c.testValid=function(){this.curNum==this.min?(this.deactiveItem(this.minDom),this.minAble=!1):0==this.minAble&&(this.acticeItem(this.minDom),this.minAble=!0),this.curNum==this.max?(this.deactiveItem(this.maxDom),this.maxAble=!1):0==this.maxAble&&(this.acticeItem(this.maxDom),this.maxAble=!0)},c.deactiveItem=function(a){a&&a.addClass(this.invalid)},c.acticeItem=function(a){a&&a.removeClass(this.invalid)},c.getText=function(){return this.curNum+this.unit},c.createHtml=function(){return['<span class="cui-number-ma">','<i class="'+this.minusClass+'"></i>','<input type="tel"  class="'+this.curClass+'" >','<i class="'+this.addClass+'"></i>',"</span>"].join("")},new a.Class(b,c)});