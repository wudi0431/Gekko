define(["cBase","cUIAbstractView"],function(a,b){var c={};return c.__propertys__=function(){this.selectedKey=null,this.data=[],this.changed=function(){},this.changeAble=function(){},this.curEl=null},c.initialize=function($super,a){for(var b in a)this[b]=a[b];$super(a),this.bindEvent(),this.show()},c.bindEvent=function(){this.addEvent("onShow",function(){this.init(),this.root.on("click",$.proxy(function(a){var b=$(a.target);"li"==b[0].tagName.toLowerCase()&&this.setVal(b.attr("data-key"))},this))}),this.addEvent("onHide",function(){this.root.off("click"),this.root.remove()})},c.getVal=function(){return this.selectedKey},c.setVal=function(a){this.curEl=this.root.find('li[data-key="'+a+'"]');var b=this.curEl.attr("data-index"),c=this.data[b];if("function"==typeof this.changeAble&&0==this.changeAble.call(this,c))return!1;if(!c)return void 0;this._tab=this.root.find(".cui-tab-scrollbar");var d=this.selectedKey==a;if(this.selectedKey=a,this.tabs.removeClass("cui-tab-current"),this.curEl&&this.curEl.addClass("cui-tab-current"),navigator.userAgent.toLowerCase().indexOf("android")>-1){var e=this._tab.css("width");setTimeout($.proxy(function(){this._tab.css("width",e)},this),0)}0==d&&"function"==typeof this.changed&&this.changed.call(this,c)},c.setIndex=function(a){0>a||a>this.data.length-1||this.setVal(this.data[a].id)},c.getIndex=function(){for(var a=0,b=this.data.length;b>a;a++)if(this.getVal()==this.data[a].id)return a;return-1},c.init=function(){this.tmpt=_.template(['<ul class="cui-tab-mod">',"<%for(var i = 0, len = data.length; i < len; i++) { %>",'<li data-key="<%=data[i].id %>" data-index="<%=i%>" <% if(data[i].id == selectedKey) { %>class="cui-tab-current"<%} %> ><%=data[i].name %></li>',"<%} %>",'<i class="cui-tab-scrollbar cui-tabnum<%=len %>"></i>',"</ul>"].join(""));var a=this.tmpt({data:this.data,selectedKey:this.selectedKey});this.root.html(a),this.tabs=this.root.find("li"),this.curEl=this.root.find(".cui-tab-current")},c.createHtml=function(){return""},new a.Class(b,c)});