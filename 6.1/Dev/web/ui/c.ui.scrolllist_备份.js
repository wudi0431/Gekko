define(["cBase","cUIScroll"],function(a,b){var c=function(a){a=a||{},this._setDisItemNum(a),this._setSelectedIndex(a),this._initBaseDom(a),this._addItem(),this._setBaseParam(a),this.init()};return c.prototype={constructor:c,_setBaseParam:function(a){if(this.data.constructor!=Array||0==this.data.length)return!1;var b=(this.dragEl.offset(),this.dragEl.find("li").eq(0)),c=b.offset();this.itemHeight=c.height,this.setHeight=this.itemHeight*this.disItemNum,this.dragHeight=this.itemHeight*this.size,this.body.css("height",this.setHeight),this.dragEl.css("height",this.dragHeight),this._changed=a.changed||null},_initBaseDom:function(a){this.wrapper=a.wrapper||$(document),this.id=a.id||"id_"+(new Date).getTime(),this.className=a.className||"cui-roller-bd",this.scrollClass=a.scrollClass||"ul-list",this.body=$(['<div class="'+this.className+'" style="overflow: hidden; position: relative; " id="'+this.id+'" >',"</div>"].join("")),this.dragEl=$(['<ul class="'+this.scrollClass+'" style="position: absolute; width: 100%;">',"</ul>"].join("")),this.wrapper.append(this.body)},_setDisItemNum:function(a){if(this.data=a.data||[],this.dataK={},this.size=this.data.length,this.disItemNum=5,this.disItemNum=a.disItemNum||this.disItemNum,this.disItemNum=this.disItemNum%2==0?this.disItemNum+1:this.disItemNum,this.data.length<this.disItemNum){for(var b=0,c=this.disItemNum-this.data.length;c>b;b++)this.data.push({key:"",val:"",disabled:!1});this.size=this.disItemNum}},_setSelectedIndex:function(a){this.selectedIndex=parseInt(this.disItemNum/2),this.selectedIndex=void 0!=a.index?a.index:this.selectedIndex,this.selectedIndex=this.selectedIndex>this.data.length?0:this.selectedIndex,this._checkSelected()},_checkSelected:function(a){a=a||"down";var b=this.selectedIndex;!this.data[b]||"undefined"!=typeof this.data[b].disabled&&0!=this.data[b].disabled||("down"==a?(this.selectedIndex=this._checkSelectedDown(b),"number"!=typeof this.selectedIndex&&(this.selectedIndex=this._checkSelectedUp(b))):(this.selectedIndex=this._checkSelectedUp(b),"number"!=typeof this.selectedIndex&&(this.selectedIndex=this._checkSelectedDown(b)))),"number"!=typeof this.selectedIndex&&(this.selectedIndex=b)},_checkSelectedUp:function(a){for(var b=!1,c=a;-1!=c;c--)if("undefined"==typeof this.data[c].disabled||1==this.data[c].disabled){a=c,b=!0;break}return b?a:null},_checkSelectedDown:function(a){for(var b=!1,c=a,d=this.data.length;d>c;c++)if("undefined"==typeof this.data[c].disabled||1==this.data[c].disabled){a=c,b=!0;break}return b?a:null},init:function(){var a=this;this.scroll=new b({scrollbars:!1,wrapper:this.body,scroller:this.dragEl,adjustXY:function(b,c){var d=a.itemHeight,c=Math.abs(c),e=c%d,f=d-e;return 0!=e&&(e>d/2?c+=f:c-=e),c=c>0?-1*c:c,{x:b,y:c}}}),this.scroll.on("scrollEnd",function(){var b=this.getComputedPosition(),c=Math.abs(b.y);this.selectedIndex=c/a.itemHeight,a._checkSelected(),a.setIndex(a.selectedIndex)})},_addItem:function(){var a,b,c,d;for(var c in this.data)b=this.data[c],b.index=c,"undefined"==typeof b.key&&(b.key=b.id),"undefined"==typeof b.val&&(b.val=b.name),d=b.val||b.key,this.dataK[b.key]=b,a=$("<li>"+d+"</li>"),a.attr("data-index",c),"undefined"!=typeof b.disabled&&0==b.disabled&&a.css("color","gray"),this.dragEl.append(a);this.body.append(this.dragEl)},setIndex:function(a){this.scroll.scrollTo(0,a*this.itemHeight*-1,0)},setKey:function(){}},c});