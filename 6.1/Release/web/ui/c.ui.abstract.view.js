define(["libs","cBase","cUIBase"],function(a,b,c){"use strict";var d=Array.prototype.slice,e=Array.prototype.push,f=Object.prototype.toString,g="notCreate",h="onCreate",i="onShow",j="onHide",k={};return k.__propertys__=function(){this.allowEvents={onCreate:!0,onShow:!0,onHide:!0},this.allowsPush={classNames:!0},this.allowsConfig={rootBox:!0},this.events={onCreate:[],onShow:[],onHide:[]},this.status=g,this.setOptionHander=[],this.rootBox,this.id=c.getCreateId(),this.classNames=[c.config.prefix+"view"],this.root,this.isCreate=!1},k.initialize=function(a){this.setOption(function(a,b){switch(!0){case this.allowEvents[a]:this.addEvent(a,b);break;case this.allowsPush[a]:"[object Array]"===f.call(b)?e.apply(this[a],b):this[a].push(b);break;case this.allowsConfig[a]:this[a]=b}}),this.readOption(a)},k.readOption=function(a){a=a||{};var b=this;$.each(a,function(a,c){$.each(b.setOptionHander,function(d,e){"function"==typeof e&&e.call(b,a,c)})})},k.setOption=function(a){this.setOptionHander.push(a)},k.createRoot=function(){var a=document.createElement("div");return a.className=this.classNames.join(" "),a.id=this.id,$(a)},k.addClass=function(a){if(this.classNames.push(a),this.root)if("array"==typeof a)for(var b in a)this.root.addClass(a[b]);else"string"==typeof a&&this.root.addClass(a)},k.removeClass=function(a){if("array"==typeof a)for(var b in a)this.root.removeClass(a[b]);else"string"==typeof a&&this.root.removeClass(a)},k.createHtml=function(){throw new Error("未定义createHtml方法")},k.setRootHtml=function(a){this.root&&(this.root.empty(),this.root.append(a))},k.getRoot=function(){return this.root},k.addEventType=function(a){this.allowEvents[a]=!0,this.events[a]=[]},k.addEvent=function(a,b){return this.allowEvents[a]?void(this.events[a]&&this.events[a].push(b)):!1},k.removeEvent=function(a,b){this.events[a]&&(this.events[a]=b?_.without(this.events[a],b):[])},k.remove=function(){this.hide(),this.root.remove()},k.trigger=function(a){var b,c,e=d.call(arguments,1),f=this.events,g=[];if(this.events[a])for(b=0,c=f[a].length;c>b;b++)g[g.length]=f[a][b].apply(this,e);return g},k.create=function(){this.isCreate||this.status===h||(this.rootBox=this.rootBox||$("body"),this.root=this.createRoot(),this.root.hide(),this.rootBox.append(this.root),this.root.append(this.createHtml()),this.trigger("onCreate"),this.status=h,this.isCreate=!0)},k.template=function(a){return _.template(a)},k.showAction=function(a){this.root.show(),"function"==typeof a&&a()},k.hideAction=function(a){this.root.hide(),"function"==typeof a&&a()},k.setzIndexTop=function(a){a="number"!=typeof a?0:a,this.root.css("z-index",c.getBiggerzIndex()+a)},k.isNotCreate=function(){return this.status===g},k.isShow=function(){return this.status===i},k.isHide=function(){return this.status===j},k.show=function(a){this.status!==i&&(this.create(),this.showAction($.proxy(function(){this.trigger("onShow"),this.status=i,a&&a.call(this)},this)))},k.hide=function(a){this.root&&this.status!==j&&this.hideAction($.proxy(function(){this.trigger("onHide"),this.status=j,a&&a.call(this)},this))},k.reposition=function(){this.root.css({"margin-left":-($(this.root).width()/2)+"px","margin-top":-($(this.root).height()/2)+"px"})},b.Class(k)});